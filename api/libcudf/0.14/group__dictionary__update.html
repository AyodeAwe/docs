<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/xhtml;charset=utf-8" http-equiv="Content-Type"/>
<meta content="IE=9" http-equiv="X-UA-Compatible"/>
<meta content="Doxygen 1.8.18" name="generator"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>libcudf: Updating Keys</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script src="jquery.js" type="text/javascript"></script>
<script src="dynsections.js" type="text/javascript"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script src="search/searchdata.js" type="text/javascript"></script>
<script src="search/search.js" type="text/javascript"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" id="rapids-fa-tag" rel="stylesheet"/><link href="/assets/css/custom.css" id="rapids-selector-css" rel="stylesheet"/></head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea"><div id="rapids-doxygen-container"><div class="rapids-home-container"><a class="rapids-home-container__home-btn" href="/api">Home</a></div><div class="rapids-selector__container rapids-selector--hidden"><div class="rapids-selector__selected">libcudf</div><div class="rapids-selector__menu"><a class="rapids-selector__menu-item" href="/api/clx/stable/api.html">clx</a><a class="rapids-selector__menu-item" href="/api/cudf-java/stable">cudf-java</a><a class="rapids-selector__menu-item" href="/api/cudf/stable/api.html">cudf</a><a class="rapids-selector__menu-item" href="/api/cugraph/stable/api.html">cugraph</a><a class="rapids-selector__menu-item" href="/api/cuml/stable/api.html">cuml</a><a class="rapids-selector__menu-item" href="/api/cusignal/stable/api.html">cusignal</a><a class="rapids-selector__menu-item" href="/api/cuspatial/stable/api.html">cuspatial</a><a class="rapids-selector__menu-item" href="/api/cuxfilter/stable">cuxfilter</a><a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/libcudf/stable/namespacecudf.html">libcudf</a><a class="rapids-selector__menu-item" href="/api/libcugraph/stable">libcugraph</a><a class="rapids-selector__menu-item" href="/api/libcuml/stable">libcuml</a><a class="rapids-selector__menu-item" href="/api/libnvstrings/stable/annotated.html">libnvstrings</a><a class="rapids-selector__menu-item" href="/api/nvstrings/stable/api.html">nvstrings</a><a class="rapids-selector__menu-item" href="/api/rmm/stable/annotated.html">rmm</a></div></div><div class="rapids-selector__container rapids-selector--hidden"><div class="rapids-selector__selected">legacy (0.14)</div><div class="rapids-selector__menu"><a class="rapids-selector__menu-item" href="/api/libcudf/nightly/namespacecudf.html">nightly (0.16)</a><a class="rapids-selector__menu-item" href="/api/libcudf/stable/namespacecudf.html">stable (0.15)</a><a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/libcudf/legacy/namespacecudf.html">legacy (0.14)</a></div></div></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script src="menudata.js" type="text/javascript"></script>
<script src="menu.js" type="text/javascript"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>
<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>
<div class="header">
<div class="summary">
<a href="#func-members">Functions</a> </div>
<div class="headertitle">
<div class="title">Updating Keys<div class="ingroups"><a class="el" href="group__dictionary__apis.html">Dictionary</a></div></div> </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac465f9126b50dba4b70584c411b344cb"><td align="right" class="memItemLeft" valign="top">std::unique_ptr&lt; <a class="el" href="classcudf_1_1column.html">column</a> &gt; </td><td class="memItemRight" valign="bottom"><a class="el" href="group__dictionary__update.html#gac465f9126b50dba4b70584c411b344cb">cudf::dictionary::add_keys</a> (<a class="el" href="classcudf_1_1dictionary__column__view.html">dictionary_column_view</a> const &amp;dictionary_column, <a class="el" href="classcudf_1_1column__view.html">column_view</a> const &amp;new_keys, rmm::mr::device_memory_resource *mr=rmm::mr::get_default_resource())</td></tr>
<tr class="memdesc:gac465f9126b50dba4b70584c411b344cb"><td class="mdescLeft"> </td><td class="mdescRight">Create a new dictionary column by adding the new keys elements to the existing dictionary_column.  <a href="group__dictionary__update.html#gac465f9126b50dba4b70584c411b344cb">More...</a><br/></td></tr>
<tr class="separator:gac465f9126b50dba4b70584c411b344cb"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:ga4f5f3310f80e6b1e4e02970f08a9fc9d"><td align="right" class="memItemLeft" valign="top">std::unique_ptr&lt; <a class="el" href="classcudf_1_1column.html">column</a> &gt; </td><td class="memItemRight" valign="bottom"><a class="el" href="group__dictionary__update.html#ga4f5f3310f80e6b1e4e02970f08a9fc9d">cudf::dictionary::remove_keys</a> (<a class="el" href="classcudf_1_1dictionary__column__view.html">dictionary_column_view</a> const &amp;dictionary_column, <a class="el" href="classcudf_1_1column__view.html">column_view</a> const &amp;keys_to_remove, rmm::mr::device_memory_resource *mr=rmm::mr::get_default_resource())</td></tr>
<tr class="memdesc:ga4f5f3310f80e6b1e4e02970f08a9fc9d"><td class="mdescLeft"> </td><td class="mdescRight">Create a new dictionary column by removing the specified keys from the existing dictionary_column.  <a href="group__dictionary__update.html#ga4f5f3310f80e6b1e4e02970f08a9fc9d">More...</a><br/></td></tr>
<tr class="separator:ga4f5f3310f80e6b1e4e02970f08a9fc9d"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:gabaf0a648c57cca539247f7aeee4029df"><td align="right" class="memItemLeft" valign="top">std::unique_ptr&lt; <a class="el" href="classcudf_1_1column.html">column</a> &gt; </td><td class="memItemRight" valign="bottom"><a class="el" href="group__dictionary__update.html#gabaf0a648c57cca539247f7aeee4029df">cudf::dictionary::remove_unused_keys</a> (<a class="el" href="classcudf_1_1dictionary__column__view.html">dictionary_column_view</a> const &amp;dictionary_column, rmm::mr::device_memory_resource *mr=rmm::mr::get_default_resource())</td></tr>
<tr class="memdesc:gabaf0a648c57cca539247f7aeee4029df"><td class="mdescLeft"> </td><td class="mdescRight">Create a new dictionary column by removing any keys that are not referenced by any of the indices.  <a href="group__dictionary__update.html#gabaf0a648c57cca539247f7aeee4029df">More...</a><br/></td></tr>
<tr class="separator:gabaf0a648c57cca539247f7aeee4029df"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:ga01a48a47cda103a370a77c6cbc6155b4"><td align="right" class="memItemLeft" valign="top">std::unique_ptr&lt; <a class="el" href="classcudf_1_1column.html">column</a> &gt; </td><td class="memItemRight" valign="bottom"><a class="el" href="group__dictionary__update.html#ga01a48a47cda103a370a77c6cbc6155b4">cudf::dictionary::set_keys</a> (<a class="el" href="classcudf_1_1dictionary__column__view.html">dictionary_column_view</a> const &amp;dictionary_column, <a class="el" href="classcudf_1_1column__view.html">column_view</a> const &amp;keys, rmm::mr::device_memory_resource *mr=rmm::mr::get_default_resource())</td></tr>
<tr class="memdesc:ga01a48a47cda103a370a77c6cbc6155b4"><td class="mdescLeft"> </td><td class="mdescRight">Create a new dictionary column by applying only the specified keys to the existing dictionary_column.  <a href="group__dictionary__update.html#ga01a48a47cda103a370a77c6cbc6155b4">More...</a><br/></td></tr>
<tr class="separator:ga01a48a47cda103a370a77c6cbc6155b4"><td class="memSeparator" colspan="2"> </td></tr>
</table>
<a id="details" name="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac465f9126b50dba4b70584c411b344cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac465f9126b50dba4b70584c411b344cb">◆ </a></span>add_keys()</h2>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname">std::unique_ptr&lt;<a class="el" href="classcudf_1_1column.html">column</a>&gt; cudf::dictionary::add_keys </td>
<td>(</td>
<td class="paramtype"><a class="el" href="classcudf_1_1dictionary__column__view.html">dictionary_column_view</a> const &amp; </td>
<td class="paramname"><em>dictionary_column</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="classcudf_1_1column__view.html">column_view</a> const &amp; </td>
<td class="paramname"><em>new_keys</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">rmm::mr::device_memory_resource * </td>
<td class="paramname"><em>mr</em> = <code>rmm::mr::get_default_resource()</code> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Create a new dictionary column by adding the new keys elements to the existing dictionary_column. </p>
<p>The indices are updated if any of the new keys are sorted before any of the existing dictionary elements.</p>
<div class="fragment"><div class="line">d1 = { keys=["a", "c", "d"], indices=[2, 0, 1, 0, 1]}</div>
<div class="line">d2 = add_keys( d1, ["b", "c"] )</div>
<div class="line">d2 is now {keys=["a", "b", "c", "d"], indices=[3, 0, 2, 0, 2]}</div>
</div><!-- fragment --><p>The output column will have the same number of rows as the input column. Null entries from the input column are copied to the output column. No new null entries are created by this operation.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
<table class="exception">
<tr><td class="paramname">cudf_logic_error</td><td>if the new_keys type does not match the keys type in the dictionary_column. </td></tr>
<tr><td class="paramname">cudf_logic_error</td><td>if the new_keys contain nulls.</td></tr>
</table>
</dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramname">dictionary_column</td><td>Existing dictionary column. </td></tr>
<tr><td class="paramname">new_keys</td><td>New keys to incorporate into the dictionary_column </td></tr>
<tr><td class="paramname">mr</td><td>Device memory resource used to allocate the returned column's device memory. </td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New dictionary column. </dd></dl>
</div>
</div>
<a id="ga4f5f3310f80e6b1e4e02970f08a9fc9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f5f3310f80e6b1e4e02970f08a9fc9d">◆ </a></span>remove_keys()</h2>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname">std::unique_ptr&lt;<a class="el" href="classcudf_1_1column.html">column</a>&gt; cudf::dictionary::remove_keys </td>
<td>(</td>
<td class="paramtype"><a class="el" href="classcudf_1_1dictionary__column__view.html">dictionary_column_view</a> const &amp; </td>
<td class="paramname"><em>dictionary_column</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="classcudf_1_1column__view.html">column_view</a> const &amp; </td>
<td class="paramname"><em>keys_to_remove</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">rmm::mr::device_memory_resource * </td>
<td class="paramname"><em>mr</em> = <code>rmm::mr::get_default_resource()</code> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Create a new dictionary column by removing the specified keys from the existing dictionary_column. </p>
<p>The output column will have the same number of rows as the input column. Null entries from the input column and copied to the output column. The indices are updated to the new positions of the remaining keys. Any indices pointing to removed keys sets that row to null.</p>
<div class="fragment"><div class="line">d1 = {keys=["a", "c", "d"], indices=[2, 0, 1, 0, 2]}</div>
<div class="line">d2 = remove_keys( d1, ["b", "c"] )</div>
<div class="line">d2 is now {keys=["a", "d"], indices=[1, 0, x, 0, 1], nulls=[1, 1, 0, 1, 1]}</div>
</div><!-- fragment --><p> Note that "a" has been removed so output row[2] becomes null.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
<table class="exception">
<tr><td class="paramname">cudf_logic_error</td><td>if the keys_to_remove type does not match the keys type in the dictionary_column. </td></tr>
<tr><td class="paramname">cudf_logic_error</td><td>if the keys_to_remove contain nulls.</td></tr>
</table>
</dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramname">dictionary_column</td><td>Existing dictionary column. </td></tr>
<tr><td class="paramname">keys_to_remove</td><td>The keys to remove from the dictionary_column </td></tr>
<tr><td class="paramname">mr</td><td>Device memory resource used to allocate the returned column's device memory. </td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New dictionary column. </dd></dl>
</div>
</div>
<a id="gabaf0a648c57cca539247f7aeee4029df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabaf0a648c57cca539247f7aeee4029df">◆ </a></span>remove_unused_keys()</h2>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname">std::unique_ptr&lt;<a class="el" href="classcudf_1_1column.html">column</a>&gt; cudf::dictionary::remove_unused_keys </td>
<td>(</td>
<td class="paramtype"><a class="el" href="classcudf_1_1dictionary__column__view.html">dictionary_column_view</a> const &amp; </td>
<td class="paramname"><em>dictionary_column</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">rmm::mr::device_memory_resource * </td>
<td class="paramname"><em>mr</em> = <code>rmm::mr::get_default_resource()</code> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Create a new dictionary column by removing any keys that are not referenced by any of the indices. </p>
<p>The indices are updated to the new position values of the remaining keys.</p>
<div class="fragment"><div class="line">d1 = {["a","c","d"],[2,0,2,0]}</div>
<div class="line">d2 = remove_unused_keys(d1)</div>
<div class="line">d2 is now {["a","d"],[1,0,1,0]}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramname">dictionary_column</td><td>Existing dictionary column. </td></tr>
<tr><td class="paramname">mr</td><td>Device memory resource used to allocate the returned column's device memory. </td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New dictionary column. </dd></dl>
</div>
</div>
<a id="ga01a48a47cda103a370a77c6cbc6155b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01a48a47cda103a370a77c6cbc6155b4">◆ </a></span>set_keys()</h2>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname">std::unique_ptr&lt;<a class="el" href="classcudf_1_1column.html">column</a>&gt; cudf::dictionary::set_keys </td>
<td>(</td>
<td class="paramtype"><a class="el" href="classcudf_1_1dictionary__column__view.html">dictionary_column_view</a> const &amp; </td>
<td class="paramname"><em>dictionary_column</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="classcudf_1_1column__view.html">column_view</a> const &amp; </td>
<td class="paramname"><em>keys</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">rmm::mr::device_memory_resource * </td>
<td class="paramname"><em>mr</em> = <code>rmm::mr::get_default_resource()</code> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Create a new dictionary column by applying only the specified keys to the existing dictionary_column. </p>
<p>Any new elements found in the keys parameter are added to the output dictionary. Any existing keys not in the keys parameter are removed.</p>
<p>The number of rows in the output column will be the same as the number of rows in the input column. Existing null entries are copied to the output column. The indices are updated to reflect the position values of the new keys. Any indices pointing to removed keys sets those rows to null.</p>
<div class="fragment"><div class="line">d1 = {keys=["a", "b", "c"], indices=[2, 0, 1, 2, 1]}</div>
<div class="line">d2 = set_keys(existing_dict, ["b","c","d"])</div>
<div class="line">d2 is now {keys=["b", "c", "d"], indices=[1, x, 0, 1, 0], nulls=[1, 0, 1, 1, 1]}</div>
</div><!-- fragment --><dl class="exception"><dt>Exceptions</dt><dd>
<table class="exception">
<tr><td class="paramname">cudf_logic_error</td><td>if the keys type does not match the keys type in the dictionary_column. </td></tr>
<tr><td class="paramname">cudf_logic_error</td><td>if the keys contain nulls.</td></tr>
</table>
</dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramname">dictionary_column</td><td>Existing dictionary column. </td></tr>
<tr><td class="paramname">keys</td><td>New keys to use for the output column. Must not contain nulls. </td></tr>
<tr><td class="paramname">mr</td><td>Device memory resource used to allocate the returned column's device memory. </td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New dictionary column. </dd></dl>
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by  <a href="http://www.doxygen.org/index.html">
<img alt="doxygen" class="footer" src="doxygen.png"/>
</a> 1.8.18
</small></address>
<script defer id="rapids-selector-js" src="/assets/js/custom.js"></script></body>
</html>
