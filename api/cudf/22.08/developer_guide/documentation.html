
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Writing documentation &#8212; cudf 22.08.00 documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/params.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Library Design" href="library_design.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/RAPIDS-logo-purple.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/RAPIDS-logo-purple.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class=" collapse navbar-collapse">
    <div id="navbar-center" class="ml-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../user_guide/index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api_docs/index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Developer Guide
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/rapidsai/cudf" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/rapidsai" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="library_design.html">
   Library Design
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Writing documentation
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#docstrings">
   Docstrings
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#published-documentation">
   Published documentation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#comparing-to-pandas">
   Comparing to pandas
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#writing-documentation-pages">
   Writing documentation pages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#building-documentation">
   Building documentation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#requirements">
     Requirements
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#building-and-viewing-docs">
     Building and viewing docs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#documenting-cudf-internals">
   Documenting cuDF internals
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="writing-documentation">
<h1>Writing documentation<a class="headerlink" href="#writing-documentation" title="Permalink to this heading">#</a></h1>
<p>cuDF documentation is split into multiple pieces.
All core functionality is documented using inline docstrings.
Additional pages like user or developer guides are written independently.
While docstrings are written using <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html">reStructuredText</a> (reST),
the latter are written using <a class="reference external" href="https://myst-parser.readthedocs.io/en/latest/">MyST</a>
The inline docstrings are organized using a small set of additional reST pages.
The results are all then compiled together using <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a>.
This document discusses each of these components and how to contribute to them.</p>
<section id="docstrings">
<h2>Docstrings<a class="headerlink" href="#docstrings" title="Permalink to this heading">#</a></h2>
<p>cuDF docstrings use the <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">numpy</a> style.
In lieu of a complete explanation,
we include here an example of the format and the commonly used sections:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Brief description of A.</span>

<span class="sd">    Longer description of A.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    x : int</span>
<span class="sd">        Description of x, the first constructor parameter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Short description of foo.</span>

<span class="sd">        Longer description of foo.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bar : str</span>
<span class="sd">            Description of bar.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">            Description of the return value of foo.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            Explanation of when a ValueError is raised.</span>
<span class="sd">            In this case, a ValueError is raised if bar is &quot;fail&quot;.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        The examples section is _strongly_ encouraged.</span>
<span class="sd">        Where appropriate, it may mimic the examples for the corresponding pandas API.</span>
<span class="sd">        &gt;&gt;&gt; a = A()</span>
<span class="sd">        &gt;&gt;&gt; a.foo(&#39;baz&#39;)</span>
<span class="sd">        0.0</span>
<span class="sd">        &gt;&gt;&gt; a.foo(&#39;fail&#39;)</span>
<span class="sd">        ...</span>
<span class="sd">        ValueError: Failed!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bar</span> <span class="o">==</span> <span class="s2">&quot;fail&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Failed!&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">numpydoc</span></code> supports a number of other sections of docstrings.
Developers should familiarize themselves with them, since many are useful in different scenarios.
Our guidelines include one addition to the standard the <code class="docutils literal notranslate"><span class="pre">numpydoc</span></code> guide.
Class properties, which are not explicitly covered, should be documented in the getter function.
That choice makes <code class="docutils literal notranslate"><span class="pre">help</span></code> more useful as well as enabling docstring inheritance in subclasses.</p>
<p>All of our docstrings are validated using <a class="reference external" href="http://www.pydocstyle.org/en/stable/"><code class="docutils literal notranslate"><span class="pre">pydocstyle</span></code></a>.
This ensures that docstring style is consistent and conformant across the codebase.</p>
</section>
<section id="published-documentation">
<h2>Published documentation<a class="headerlink" href="#published-documentation" title="Permalink to this heading">#</a></h2>
<p>Documentation is compiled using Sphinx, which pulls docstrings from the code.
Rather than simply listing all APIs, however, we aim to mimic the pandas documentation.
To do so, we organize API docs into specific pages and sections.
These pages are stored in <code class="docutils literal notranslate"><span class="pre">docs/cudf/source/api_docs</span></code>.
For example, all <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> documentation is contained in <code class="docutils literal notranslate"><span class="pre">docs/cudf/source/api_docs/dataframe.rst</span></code>.
That page contains sections like “Computations / descriptive stats” to make APIs more easily discoverable.</p>
<p>Within each section, documentation is created using <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/autosummary.html"><code class="docutils literal notranslate"><span class="pre">autosummary</span></code></a>
This plugin makes it easy to generate pages for each documented API.
To do so, each section of the docs looks like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Section</span> <span class="n">name</span>
<span class="o">~~~~~~~~~~~~</span>
<span class="o">..</span> <span class="n">autosummary</span><span class="p">::</span>
   <span class="n">API1</span>
   <span class="n">API2</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>Each listed will automatically have its docstring rendered into a separate page.
This layout comes from the <a class="reference external" href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">Sphinx theme</a> that we use.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Under the hood, autosummary generates stub pages that look like this (using <code class="docutils literal notranslate"><span class="pre">cudf.concat</span></code> as an example):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cudf</span><span class="o">.</span><span class="n">concat</span>
<span class="o">===========</span>

<span class="o">..</span> <span class="n">currentmodule</span><span class="p">::</span> <span class="n">cudf</span>

<span class="o">..</span> <span class="n">autofunction</span><span class="p">::</span> <span class="n">concat</span>
</pre></div>
</div>
<p>Commands like <code class="docutils literal notranslate"><span class="pre">autofunction</span></code> come from <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html"><code class="docutils literal notranslate"><span class="pre">autodoc</span></code></a>.
This directive will import cudf and pull the docstring from <code class="docutils literal notranslate"><span class="pre">cudf.concat</span></code>.
This approach allows us to do the minimal amount of manual work in organizing our docs,
while still matching the pandas layout as closely as possible.</p>
</div>
<p>When adding a new API, developers simply have to add the API to the appropriate page.
Adding the name of the function to the appropriate autosummary list is sufficient for it to be documented.</p>
</section>
<section id="comparing-to-pandas">
<h2>Comparing to pandas<a class="headerlink" href="#comparing-to-pandas" title="Permalink to this heading">#</a></h2>
<p>cuDF aims to provide a pandas-like experience.
However, for various reasons cuDF APIs may exhibit differences from pandas.
Where such differences exist, they should be documented.
We facilitate such documentation with the <code class="docutils literal notranslate"><span class="pre">pandas-compat</span></code> directive.
The directive should be used inside docstrings like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;&quot;&quot;Brief</span>

<span class="s2">Docstring body</span>

<span class="s2">.. pandas-compat::</span>
<span class="s2">    **$API_NAME**</span>

<span class="s2">    Explanation of differences</span>
</pre></div>
</div>
<p>All such API compatibility notes are collected and displayed in the rendered documentation.</p>
</section>
<section id="writing-documentation-pages">
<h2>Writing documentation pages<a class="headerlink" href="#writing-documentation-pages" title="Permalink to this heading">#</a></h2>
<p>In addition to docstrings, our docs also contain a number of more dedicated user guides.
These pages are stored in <code class="docutils literal notranslate"><span class="pre">docs/cudf/source/user_guide</span></code>.
These pages are all written using MyST, a superset of Markdown.
MyST allows developers to write using familiar Markdown syntax,
while also providing the full power of reST where needed.
These pages do not conform to any specific style or set of use cases.
However, if you develop any sufficiently complex new features,
consider whether users would benefit from a more complete demonstration of them.</p>
</section>
<section id="building-documentation">
<h2>Building documentation<a class="headerlink" href="#building-documentation" title="Permalink to this heading">#</a></h2>
<section id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h3>
<p>The following are required to build the documentation:</p>
<ul class="simple">
<li><p>A RAPIDS-compatible GPU. This is necessary because the documentation execute code.</p></li>
<li><p>A working copy of cudf in the same build environment.
We recommend following the <a class="reference external" href="https://github.com/rapidsai/cudf/blob/main/CONTRIBUTING.md#setting-up-your-build-environment">build instructions</a>.</p></li>
<li><p>Sphinx, numpydoc, and MyST-NB.
Assuming you follow the build instructions, these should automatically be installed into your environment.</p></li>
</ul>
</section>
<section id="building-and-viewing-docs">
<h3>Building and viewing docs<a class="headerlink" href="#building-and-viewing-docs" title="Permalink to this heading">#</a></h3>
<p>Once you have a working copy of cudf, building the docs is straightforward:</p>
<ol class="arabic simple">
<li><p>Navigate to <code class="docutils literal notranslate"><span class="pre">/path/to/cudf/docs/cudf/</span></code>.</p></li>
<li><p>Execute <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code></p></li>
</ol>
<p>This will run Sphinx in your shell and generate outputs at <code class="docutils literal notranslate"><span class="pre">build/html/index.html</span></code>.
To view the results.</p>
<ol class="arabic simple">
<li><p>Navigate to <code class="docutils literal notranslate"><span class="pre">build/html</span></code></p></li>
<li><p>Execute <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">http.server</span></code></p></li>
</ol>
<p>Then, open a web browser and go to <code class="docutils literal notranslate"><span class="pre">https://localhost:8000</span></code>.
If something else is currently running on port 8000,
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">http.server</span></code> will automatically find the next available port.
Alternatively, you may specify a port with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">http.server</span> <span class="pre">$PORT</span></code>.</p>
<p>You may build docs on a remote machine but want to view them locally.
Assuming the other machine’s IP address is visible on your local network,
you can view the docs by replacing <code class="docutils literal notranslate"><span class="pre">localhost</span></code> with the IP address of the host machine.
Alternatively, you may also forward the port using e.g.
<code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">-N</span> <span class="pre">-f</span> <span class="pre">-L</span> <span class="pre">localhost:$LOCAL_PORT:localhost:$REMOTE_PORT</span> <span class="pre">$REMOTE_IP</span></code>.
That will make <code class="docutils literal notranslate"><span class="pre">$REMOTE_IP:$REMOTE_PORT</span></code> visible at <code class="docutils literal notranslate"><span class="pre">localhost:$LOCAL_PORT</span></code>.</p>
</section>
</section>
<section id="documenting-cudf-internals">
<h2>Documenting cuDF internals<a class="headerlink" href="#documenting-cudf-internals" title="Permalink to this heading">#</a></h2>
<p>Unlike public APIs, the documentation of internal code (functions, classes, etc) is not linted.
Documenting internals is strongly encouraged, but not enforced in any particular way.
Regarding style, either full numpy-style docstrings or regular <code class="docutils literal notranslate"><span class="pre">#</span></code> comments are acceptable.
The former can be useful for complex or widely used functionality,
while the latter is fine for small one-off functions.</p>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="library_design.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Library Design</p>
      </div>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2018-2021, NVIDIA.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.0.2.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>